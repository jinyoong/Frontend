## HTTP 프로토콜

#### 1. GET과 POST의 차이는 무엇인가요?
##### GET
- 클라이언트에서 서버로 어떠한 리소스로부터 **정보를 요청**하기 위해 사용되는 메서드
- 주로 데이터를 읽거나 검색할 때 주로 사용
- 요청을 전송할 때 URL 주소 끝에 **파라미터로 전송**하며, 이것을 `쿼리 스트링(QueryString)` 이라 한다
  ex) `http://example?name=jinyoong`
- **멱등적(Idempotent)이다**

##### POST
- 리소스를 **생성 또는 업데이터**하기 위해 서버에 데이터를 보내는데 사용되는 메서드
- 요청을 전송할 때 `Body`에 담아서 전송
- `Body`의 타입은 요청 헤더의 `Content-Type`에 타입을 명시하여 결정한다
- 길이에 제한이 없이 데이터를 전송할 수 있기 때문에 **대용량 데이터의 전달이 가능**
- 간과하기 쉬운 것은, Body에 데이터가 담겨져 있다고 해도 개발자 도구에 의해 내용을 확인할 수 있다는 점!
  따라서 암호화가 필요하다
- **비멱등적(Non-Idempotent)이다**

##### 두 차이의 간단 요약
  || GET | POST |
  |---|---|---|
  | 캐시 | O | X |
  | 브라우저 기록 | O | X |
  | 데이터 길이 제한 | O | X |
  | 주사용처 | 리소스 요청 | 리소스 생성 |
  | 데이터 전달 방식 | 쿼리 스트링 | HTTP Body |
  | 멱등성 여부 | O | X |

##### 멱등성이란
- 멱등성의 정의 : 연산의 한 성질을 나타내는 것으로, **연산을 여러 번 적용하더라도 결과가 달라지지 않는 성질**
- 즉, 같은 작업을 여러 번 반복했을 때에도 동일한 결과를 보장하느냐 아니냐의 차이
- `GET` 요청은 설계 단계에서 **멱등성이 보장되도록 설계**가 되었다
  즉, 멱등성을 보장하기에 적합한 방식이 데이터의 조회가 된 것
- `POST` 요청은 설계 단계에서 **멱등성이 보장되지 않아도 되도록 설계**가 되었다
  즉, 멱등적이지 않아도 되므로 서버의 상태나 데이터의 변경에 사용되게 된 것
  - 데이터 수정은 `PUT`을 더 많이 쓰는데??
    `PUT`은 멱등성을 가진다....
- 쉽게 이해하자면 AUAUAUAUAUA = A 인 성질이 멱등성이라고 생각하면 된다


#### 2. REST API가 무엇인가요?
##### REST(Representational State Transfer)
- 자원을 이름으로 구분하여 해당 **자원의 상태(정보)를 주고 받는 모든 것**
  `클라이언트`와 `서버` 사이의 통신 방식 중 하나
- 자원의 표현에 의한 상태 전달
  - **자원** : 해당 소프트웨어가 관리하는 모든 것
    ex) 문서, 그림, 데이터, 소프트웨어 자체 등등
  - **자원의 표현** : 해당 자원을 표현하기 위한 이름
    ex) DB의 음식 정보가 자원인 경우 => "food"를 자원의 표현으로 정할 수 있다
  - **상태의 전달** : 데이터가 요청되어지는 시점에 진행
    일반적으로 `JSON`(컴퓨터, 사람 모두 읽기 편함), `XML` 형식으로 주고 받는다
- 월드 와이드 웹(www)과 같은 **분산 하이퍼미디어 시스템을 위한 개발 아키텍처 원칙** => 프로토콜, 표준이 아니다
  - 즉, REST는 웹 기존 기술과 HTTP 프로토콜을 그대로 활용함으로써
    :star:웹의 장점을 최대한 활용할 수 있게 해주는 아키텍처 스타일:star:
- HTTP URI를 통해서 자원을 명시하고, HTTP 메서드를 통해 자원에 대한 `CRUD Operation`을 적용
  - **자원 기반 구조(ROA, Resource Oriented Architecture)** 설계의 중심에 Resource가 있고
    HTTP Method를 통해 Resource를 처리하도록 설계한 아키텍처
  - 아래와 같은 방식으로 사용한다고 생각하면 된다
    `GET` /movies => 영화 정보를 가져오자
    `GET` /movies/:id => id가 :id인 영화 정보를 가져오자
    `POST` /movies => 영화 정보를 새롭게 생성하자

##### REST의 장단점
- 장점
  - HTTP 프로토콜의 인프라를 그대로 사용하기 때문에 REST API 사용을 위해 별도의 인프라를 구축할 필요가 없다
  - HTTP 프로토콜의 표준을 최대한 활용하여 여러 장점을 가져갈 수 있게 해준다
  - HTTP 프로토콜을 따르는 모든 플랫폼에서 사용이 가능하다
  - `Hypermedia API`의 기본을 지키면서 범용성을 보장한다
  - REST API가 의도하는 메세지를 쉽게 파악할 수 있다
  - 서버와 클라이언트의 역할을 분리해준다
- 단점
  - 표준이 없다! => REST API는 아키텍처 원칙이다
  - HTTP 메서드가 제한적이다(4개)
  - 브라우저를 통한 테스트가 많은 경우 Header 값을 이용해야 하기에 어렵다

##### REST가 필요한 이유
- 애플리케이션 분리 및 통합
- 다양한 종류의 클라이언트의 등장
- 서버가 통신해야 하는 **모바일 기기, 다양한 브라우저**가 많아졌다
- **멀티 플랫폼에 대한 지원**을 위해 서비스 자원에 대한 아키텍처를 세우기 위해 등장

##### REST의 구성 요소
- 자원(Resource) : URI
  - 모든 자원은 고유 ID를 가지고, 서버에 저장되어 있다
  - 자원을 구별하는 ID는 HTTP URI(`/students/:student_id`)
  - 클라이언트는 URI를 이용해 자원을 지정하고 자원의 상태 조작을 서버에 요청한다
- 행위(Verb) : HTTP Method
  - HTTP 프로토콜의 메서드인 `GET`, `POST`, `PUT`, `DELETE`를 이용한다
- 표현(Representation of Resource)
  - 클라이언트가 자원 상태 조작을 **요청**하면 서버는 적절한 **응답**을 제공
  - REST에서 하나의 자원은 `JSON`, `XML`, `TEXT`, `RSS` 등 여러 형태로 표현될 수 있다

##### REST의 특징
1. 서버-클라이언트 구조
  - 서버 : 자원이 있는 쪽, 클라이언트 : 자원을 요청하는 쪽
    - REST 서버 : API를 제공하고 비즈니스 로직 처리 및 저장을 책임진다
    - 클라이언트 : 사용자 인증, context(세션, 로그인 정보 등)를 직접 관리한다
  - 서로간의 의존성이 줄어든다
2. :star:**무상태(Stateless)**:star:
  - HTTP 프로토콜은 `무상태 프로토콜`이므로 이를 활용하는 REST 역시 무상태성을 지닌다
  - 클라이언트의 context를 **서버에 저장하지 않는다**
    결국 세션과 쿠키 같은 정보를 신경쓰지 않아도 되어서 구현이 단순해진다는 장점이 있다
  - 서버는 각각의 요청을 **완전히 독립적으로 보고 처리**한다
    - 각 API 서버는 요청을 단순 처리한다
      즉, 요청끼리 연관되어서는 안된다(DB가 변경되는 것은 상관 X)
    - 일관적인 서버 처리 방식 덕분에 서비스의 부담은 줄고, 자유도는 늘게 된다
3. **캐시 처리 가능(Cacheable)**
  - 웹 표준 HTTP 프로토콜을 그대로 사용하므로 기존 인프라 활용 가능
    - 따라서 `캐싱 기능`의 적용이 가능
    - `Last-Modified 태그`나 `E-Tag` 를 이용하여 캐싱 기능을 구현
      > Last-Modified 와 E-Tag
      > - Last-Modified
      >   HTTP 헤더에 서버가 알고 있는 가장 마지막 수정된 날짜와 시각을 담고 있다
      > - E-Tag
      >   HTTP 헤더로써 특정 버전의 리소스를 식별하는 식별자
      >   웹 서버가 내용을 확인하고 변하지 않았을 경우, full 요청을 보내지 않음
  - 캐시가 요구되는 이유 : 대량의 요청을 효율적으로 처리하기 위함!
  - 캐시의 사용으로 응답시간을 단축하고 REST 서버에 **트랜잭션이 발생하지 않게 된다**
    즉, 전체적인 성능과 자원 이용률을 상승시킬 수 있게 된다
    > 트랜잭션이란?
    > 데이터베이스의 상태를 변경시키기 위해 수행하는 작업 단위
    > 데이터베이스와 데이터간의 처리에 있어 안정성을 확보하기 위한 방법
4. 계층화(Layered System)
  - 클라이언트는 REST API 서버만을 호출
  - REST 서버는 `다중 계층`으로 구성이 가능
  - 프록시, 게이트웨이 같은 네트워크 기반의 중간 매체를 사용할 수 있다

##### API(Application Programing Interface)
- 애플리케이션 소프트웨어를 구축하고 통합하는 정의 및 프로토콜 세트
- 주로 `정보 제공자`와 `정보 사용자` 간의 계약으로 사용된다
- 소비자가 필요한 컨텐츠를 **호출**하면, 생산자가 요구하는 컨텐츠를 **응답**하는 방식
- 즉, 사용자와 클라이언트 사이에서 **리소스와 정보를 공유**할 수 있게 도와주는 역할을 수행

##### REST API란
- REST 아키텍처의 제약 조건을 준수하는 API
- 네이버 API, 카카오 지도 API 등의 오픈 API와 마이크로 서비스 등을 제공하는 경우의 대부분이 REST API를 제공
  > 마이크로 서비스란?
  > 하나의 큰 어플리케이션을 여러 개의 작은 어플리케이션으로 쪼개, 변경과 조합이 가능하게 만든 아키텍처

##### REST API의 특징
- REST 기반으로 시스템을 분산하여 확장성과 재사용성을 높일 수 있다
  자연스럽게 유지보수와 시스템 운영을 편리하게 하는데 도움을 준다
- HTTP 표준을 기반으로 구현하는 아키텍처 스타일이므로
  HTTP를 지원하는 프로그램 언어로 클라이언트와 서버를 구현할 수 있다.

##### REST API 설계 규칙
1. URI는 정보의 자원을 표현한다
  - 리소스는 명사를 소문자로 사용한다
  - 리소스의 도큐먼트 이름으로는 단수 명사를 사용한다
  - 리소스의 컬렉션 이름으로는 복수 명사를 사용한다
  - 리소스의 스토어 이름으로는 복수 명사를 사용해야 한다
    - EX) `GET /Student/1` => `GET /students/1`
    > 도큐먼트, 컬렉션, 스토어는 무엇인가?
    > - 도큐먼트 : 객체 인스턴스나 데이터베이스 레코드와 유사
    > - 컬렉션 : 서버에서 관리하는 디렉토리
    > - 스토어 : 클라언트에서 관리하는 리소스 저장소
2. 자원에 대한 행위는 HTTP Method로 표현한다
  - URI에 HTTP Method를 넣으면 안된다
  - URI에 행위 표현이 들어가면 안된다
    - EX) `GET /students/get` => `GET /students`
  - 변하는 부분은 유일성이 보장되는 값으로 표현한다(일반적으로 `id`)
    - EX) `GET /students/1`의 1이 해당된다
3. `/`는 계층관계를 나타내는데 사용되며, 마지막 문자로 사용하지 않는다
  - URI가 다르면 리소스가 다른 것이고, 리소스가 다르면 URI로 다르게 구성해야 한다
4. 하이픈(`-`)을 사용하고 밑줄(`_`)은 사용하지 않는다
  - 밑줄(`_`)은 잘 보이지 않아 구분이 힘들다
  - 가독성을 위해 하이픈(`-`)을 사용한다
5. 파일확장자는 URI에 포함하면 안된다
  - 파일 확장자는 `Accept header`를 이용하여 전달한다
  - EX) `GET /students/music/1/photo aaaaaaaaa` / `Accept: image/jpg`